# Component Contract: MagicLinkPanel
contractId: "component-MagicLinkPanel-20250113"
componentInfo:
  name: "MagicLinkPanel"
  filePath: "/src/components/admin/MagicLinkPanel.tsx"
  category: "admin"
  parentPage: "admin management"
  complexity: "moderate"
  
functionalAnalysis:
  purpose: "Manage magic links for passwordless authentication"
  primaryFunction: "Create, view, copy, and revoke magic authentication links"
  userInteractions:
    - "View list of magic links with status"
    - "Copy active magic links to clipboard"
    - "Revoke unused magic links"
    - "Generate new magic links"
    - "Refresh magic links list"
  businessLogic: "Magic link lifecycle management with expiration and usage tracking"
  stateManagement: "Magic links list with loading states"
  
dataIntegration:
  hasSupabaseConnection: true
  connectionType: "direct"
  supabaseTables:
    - "magic_links"
  tableUsage:
    - tableName: "magic_links"
      operations: ["select", "insert", "delete"]
      purpose: "Magic link storage and management"
      dataFlow: "CRUD operations for magic link lifecycle"
  
codeAnalysis:
  isHardcoded: true
  hardcodedElements:
    - "Mock magic links for demonstration"
    - "Hardcoded user IDs in mock data"
  mockDataUsage:
    - "Creates mock magic links if table is empty"
    - "Uses Patrick's user ID and mock user IDs"
  realDataPercentage: 70
  
dependencies:
  hooks:
    - "useState, useEffect (React hooks)"
  contexts: []
  utilities:
    - "supabase client"
  externalLibraries:
    - "sonner (toast notifications)"
    - "lucide-react (icons)"
  
supabaseTableDetails:
  tablesUsed:
    - "magic_links (authentication tokens)"
  tableRelationships:
    - "magic_links -> users (many-to-one via user_id)"
  queryPatterns:
    - "Select all links ordered by creation date"
    - "Count existing links for mock data check"
    - "Delete by ID for revocation"
  dataTransformations:
    - "Determines link status based on expiration and usage"
    - "Generates magic link URLs with tokens"
  
mvpReadiness:
  isProductionReady: false
  blockers:
    - "Contains hardcoded mock data"
    - "Uses fixed user IDs in mock generation"
  improvements:
    - "Remove mock data creation"
    - "Add proper magic link generation flow"
    - "Implement email integration"
  priority: "medium"
  
testingStatus:
  hasTests: false
  testCoverage: 0
  testTypes: []
  
documentation:
  hasDocumentation: false
  documentationQuality: "poor"
  needsDocumentation:
    - "Magic link generation process"
    - "Security considerations"
    - "Expiration and cleanup policies"
  
componentInteractions:
  callsComponents:
    - "Card (UI component)"
    - "Table (UI component)"
    - "Button (UI component)"
    - "Badge (UI component)"
  calledByComponents:
    - "ManagementTabs"
    - "Admin magic links tab"
  sharedState: []
  eventCommunication: []
  propsPassedTo: []
  propsReceivedFrom: []
  
userJourneyContext:
  userFlows:
    - "Admin -> Magic Links -> View Links -> Copy/Revoke -> Send to User"
  criticalForMVP: true
  usageFrequency: "medium"
  primaryUserTypes: ["admin", "club_director"]
  featureArea: "admin"
  journeyStage: "core-loop"
  
duplicateFunctionality:
  hasDuplicates: false
  duplicateComponents: []
  primaryComponent: "MagicLinkPanel"
  reasonForDuplication: ""
  consolidationStrategy: ""
  supabaseIntegrationWinner: "MagicLinkPanel"